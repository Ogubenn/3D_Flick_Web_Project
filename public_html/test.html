<!DOCTYPE html>
<html lang="tr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal Test</title>
    <link rel="stylesheet" href="./new-style.css">
</head>
<body>
    <div class="container">
        <h1>Modal Sistemi Test</h1>
        
        <button data-modal="testModal">Test Modal AÃ§</button>
        <button id="uploadBtn">Upload Modal AÃ§</button>
        <button id="galleryBtn">Gallery Modal AÃ§</button>
    </div>
    
    <!-- Test Modal -->
    <div class="modal-overlay" id="testModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Test Modal</h2>
                <button class="modal-close">Ã—</button>
            </div>
            <div class="modal-body">
                <p>Bu bir test modalÄ±dÄ±r.</p>
            </div>
        </div>
    </div>
    
    <!-- Upload Modal -->
    <div class="modal-overlay" id="uploadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">ğŸ“¤ STL DosyasÄ± YÃ¼kle</h2>
                <button class="modal-close">Ã—</button>
            </div>
            <div class="modal-body">
                <p>STL dosyasÄ± yÃ¼kleme modalÄ±</p>
            </div>
        </div>
    </div>
    
    <!-- Gallery Modal -->
    <div class="modal-overlay" id="galleryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">ğŸ–¼ï¸ FigÃ¼r Galerim</h2>
                <button class="modal-close">Ã—</button>
            </div>
            <div class="modal-body">
                <p>FigÃ¼r galerisi modalÄ±</p>
            </div>
        </div>
    </div>

    <script>
        // Yeni Modal Sistemi - Test
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Test modal sistemi yÃ¼kleniyor...');
            
            // Modal aÃ§ma fonksiyonu
            function openModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal && modal.classList.contains('modal-overlay')) {
                    // Ã–nce tÃ¼m modalleri kapat
                    closeAllModals();
                    
                    // SeÃ§ilen modalÄ± aÃ§
                    modal.classList.add('show');
                    document.body.style.overflow = 'hidden';
                    
                    console.log('Modal aÃ§Ä±ldÄ±:', modalId);
                } else {
                    console.log('Modal bulunamadÄ±:', modalId);
                }
            }
            
            // Modal kapatma fonksiyonu
            function closeModal(modalId) {
                const modal = modalId ? document.getElementById(modalId) : document.querySelector('.modal-overlay.show');
                if (modal) {
                    modal.classList.remove('show');
                    document.body.style.overflow = '';
                    console.log('Modal kapatÄ±ldÄ±:', modal.id);
                }
            }
            
            // TÃ¼m modalleri kapat
            function closeAllModals() {
                document.querySelectorAll('.modal-overlay.show').forEach(modal => {
                    modal.classList.remove('show');
                });
                document.body.style.overflow = '';
            }
            
            // Event delegation ile modal aÃ§ma butonlarÄ±nÄ± dinle
            document.addEventListener('click', function(e) {
                const target = e.target.closest('[data-modal]');
                if (target) {
                    e.preventDefault();
                    const modalId = target.getAttribute('data-modal');
                    console.log('Modal aÃ§ma isteÄŸi:', modalId);
                    openModal(modalId);
                    return;
                }
                
                // Modal kapatma butonlarÄ± (.modal-close)
                if (e.target.closest('.modal-close')) {
                    e.preventDefault();
                    const modal = e.target.closest('.modal-overlay');
                    if (modal) {
                        console.log('Modal kapatma isteÄŸi:', modal.id);
                        closeModal(modal.id);
                    }
                    return;
                }
                
                // Overlay'e (modal dÄ±ÅŸÄ±na) tÄ±klama ile kapatma
                if (e.target.classList.contains('modal-overlay')) {
                    console.log('Overlay tÄ±klama, modal kapatÄ±lÄ±yor:', e.target.id);
                    closeModal(e.target.id);
                    return;
                }
            });
            
            // ESC tuÅŸu ile modal kapatma
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const activeModal = document.querySelector('.modal-overlay.show');
                    if (activeModal) {
                        console.log('ESC ile modal kapatÄ±lÄ±yor:', activeModal.id);
                        closeModal(activeModal.id);
                    }
                }
            });
            
            // Ã–zel butonlar iÃ§in event listenerlar
            document.getElementById('uploadBtn')?.addEventListener('click', function(e) {
                e.preventDefault();
                console.log('Upload butonu tÄ±klandÄ±');
                openModal('uploadModal');
            });
            
            document.getElementById('galleryBtn')?.addEventListener('click', function(e) {
                e.preventDefault();
                console.log('Gallery butonu tÄ±klandÄ±');
                openModal('galleryModal');
            });
            
            console.log('Test modal sistemi hazÄ±r. Modaller:', document.querySelectorAll('.modal-overlay').length);
        });
    </script>
</body>
</html>