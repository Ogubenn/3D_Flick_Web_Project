<!DOCTYPE html>
<html lang="tr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal Test</title>
    <link rel="stylesheet" href="./new-style.css?v=2.0">
</head>
<body>
    <div style="padding: 50px;">
        <h1>Modal Test Sayfasƒ±</h1>
        <button id="statsBtn" data-modal="statsModal">ƒ∞statistikler Modalƒ±nƒ± A√ß</button>
    </div>

    <!-- Stats Modal -->
    <div class="modal-overlay" id="statsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üìä ƒ∞statistikler</h2>
                <button class="modal-close">√ó</button>
            </div>
            <div class="modal-body">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-info">
                            <div class="stat-value">1</div>
                            <div class="stat-label">Bug√ºnk√º Model</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-info">
                            <div class="stat-value">5</div>
                            <div class="stat-label">Toplam Model</div>
                        </div>
                    </div>
                </div>
                
                <!-- Scroll test i√ßin uzun i√ßerik -->
                <div style="margin-top: 20px;">
                    <h3>Test ƒ∞√ßeriƒüi</h3>
                    <p>Bu i√ßerik modal scroll testini yapmak i√ßin eklendi.</p>
                    <div style="height: 200px; background: #f0f0f0; margin: 10px 0; padding: 20px; border-radius: 8px;">
                        <p>Uzun i√ßerik alanƒ± 1</p>
                    </div>
                    <div style="height: 200px; background: #e0e0e0; margin: 10px 0; padding: 20px; border-radius: 8px;">
                        <p>Uzun i√ßerik alanƒ± 2</p>
                    </div>
                    <div style="height: 200px; background: #d0d0d0; margin: 10px 0; padding: 20px; border-radius: 8px;">
                        <p>Uzun i√ßerik alanƒ± 3</p>
                    </div>
                    <div style="height: 200px; background: #c0c0c0; margin: 10px 0; padding: 20px; border-radius: 8px;">
                        <p>Uzun i√ßerik alanƒ± 4</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Modal a√ßma fonksiyonu
            function openModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal && modal.classList.contains('modal-overlay')) {
                    // Scroll pozisyonunu kaydet
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    document.body.setAttribute('data-scroll-position', scrollTop);
                    
                    modal.classList.add('show');
                    document.body.classList.add('modal-open');
                    document.body.style.top = `-${scrollTop}px`;
                    console.log('Modal a√ßƒ±ldƒ±:', modalId);
                }
            }
            
            // Modal kapatma fonksiyonu
            function closeModal(modalId) {
                const modal = modalId ? document.getElementById(modalId) : document.querySelector('.modal-overlay.show');
                if (modal) {
                    modal.classList.remove('show');
                    
                    // Body scroll durumunu geri y√ºkle
                    document.body.classList.remove('modal-open');
                    document.body.style.top = '';
                    
                    // Scroll pozisyonunu geri y√ºkle
                    const scrollTop = document.body.getAttribute('data-scroll-position');
                    if (scrollTop) {
                        window.scrollTo(0, parseInt(scrollTop));
                        document.body.removeAttribute('data-scroll-position');
                    }
                    console.log('Modal kapatƒ±ldƒ±:', modal.id);
                }
            }
            
            // Event listeners
            document.addEventListener('click', function(e) {
                // Modal kapatma butonlarƒ±
                if (e.target.closest('.modal-close')) {
                    e.preventDefault();
                    e.stopPropagation();
                    const modal = e.target.closest('.modal-overlay');
                    if (modal) {
                        closeModal(modal.id);
                    }
                    return;
                }
                
                // Modal a√ßma butonlarƒ±
                const target = e.target.closest('[data-modal]');
                if (target) {
                    e.preventDefault();
                    const modalId = target.getAttribute('data-modal');
                    console.log('Modal a√ßma isteƒüi:', modalId);
                    openModal(modalId);
                    return;
                }
                
                // Overlay'e tƒ±klama ile kapatma
                if (e.target.classList.contains('modal-overlay')) {
                    closeModal(e.target.id);
                    return;
                }
            });
            
            // Modal a√ßƒ±k durumunda scroll engellemesi
            document.addEventListener('touchmove', function(e) {
                if (document.body.classList.contains('modal-open')) {
                    // Modal i√ßerisindeki scroll'a izin ver
                    const modalBody = e.target.closest('.modal-body');
                    const modalContent = e.target.closest('.modal-content');
                    
                    if (!modalBody && !modalContent) {
                        e.preventDefault();
                    }
                }
            }, { passive: false });
            
            document.addEventListener('wheel', function(e) {
                if (document.body.classList.contains('modal-open')) {
                    // Modal i√ßerisindeki scroll'a izin ver
                    const modalBody = e.target.closest('.modal-body');
                    const modalContent = e.target.closest('.modal-content');
                    
                    if (!modalBody && !modalContent) {
                        e.preventDefault();
                    }
                }
            }, { passive: false });
        });
    </script>
</body>
</html>